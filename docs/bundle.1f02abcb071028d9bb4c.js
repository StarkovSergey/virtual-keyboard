(()=>{"use strict";function e(e,a){if(e){if("string"==typeof e)return t(e,a);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,a):void 0}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function a(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t,a){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return a}var c=new WeakSet,o=new WeakSet,s=new WeakSet,l=new WeakSet,d=new WeakSet,u=new WeakSet,y=new WeakSet,f=new WeakSet,k=new WeakSet,h=function(){function h(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),n(this,k),n(this,f),n(this,y),n(this,u),n(this,d),n(this,l),n(this,s),n(this,o),n(this,c),i(this,"keyLayout",void 0),i(this,"elements",{main:null,keysContainer:null,keys:[]}),i(this,"textarea",void 0),i(this,"selectionEnd",0),i(this,"properties",{value:"",capsLock:!1,shift:!1,status:1,lang:"en",ctrl:!1,alt:!1}),this.keyLayout=e,this.toggleShift=this.toggleShift.bind(this),this.changeLang=this.changeLang.bind(this)}var b,E;return b=h,(E=[{key:"setTextareaSelectionEnd",value:function(){this.selectionEnd=this.textarea.selectionEnd}},{key:"init",value:function(){var a,n,i=this;this.elements.main=document.createElement("div"),this.elements.keysContainer=document.createElement("div"),this.properties.lang=localStorage.getItem("lang"),this.elements.main.classList.add("keyboard","1keyboard--hidden"),this.elements.keysContainer.classList.add("keyboard__keys"),(a=this.elements.keysContainer).append.apply(a,function(e){if(Array.isArray(e))return t(e)}(n=r(this,o,p).call(this))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||e(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r(this,c,v).call(this),r(this,s,L).call(this),this.elements.keys=this.elements.keysContainer.querySelectorAll(".keyboard__key"),this.elements.main.append(this.elements.keysContainer),document.body.append(this.elements.main),r(this,s,L).call(this),this.textarea=document.querySelector(".use-keyboard-input"),this.textarea.addEventListener("click",(function(){i.setTextareaSelectionEnd()})),r(this,k,w).call(this)}},{key:"toggleShift",value:function(){this.properties.shift=!this.properties.shift,r(this,c,v).call(this),r(this,s,L).call(this)}},{key:"changeLang",value:function(){this.properties.lang="ru"===this.properties.lang?"en":"ru",r(this,c,v).call(this),r(this,s,L).call(this),localStorage.setItem("lang",this.properties.lang)}}])&&a(b.prototype,E),Object.defineProperty(b,"prototype",{writable:!1}),h}();function v(){var e=this.properties,t=e.shift,a=e.lang;t||"en"!==a?t&&"en"===a?this.properties.status=2:t||"ru"!==a?t&&"ru"===a&&(this.properties.status=4):this.properties.status=3:this.properties.status=1}function p(){var e=this,t=[],a=function(e){return'<i class="material-icons">'.concat(e,"</i>")};return this.keyLayout.forEach((function(n){var i=document.createElement("div"),c=-1!==["Backspace","Delete","Enter","ShiftRight"].indexOf(n[0]);switch(i.type="button",i.classList.add("keyboard__key"),i.setAttribute("data-keyCode",n[0]),n[0]){case"MetaLeft":i.innerHTML=a("grid_view"),r(e,l,b).call(e,(function(){}),"MetaLeft"),i.addEventListener("click",(function(){r(e,u,m).call(e,i),r(e,y,g).call(e)}));break;case"ControlRight":case"ControlLeft":i.classList.add("keyboard__key--fill"),i.textContent="Ctrl";var o=function(){};r(e,l,b).call(e,o,"ControlLeft"),r(e,l,b).call(e,o,"ControlRight"),i.addEventListener("click",(function(){r(e,u,m).call(e,i),r(e,y,g).call(e)})),i.addEventListener("mousedown",(function(){i.classList.add("keyboard__key--active"),e.properties.ctrl=!0,document.addEventListener("mouseup",(function(){i.classList.remove("keyboard__key--active"),e.properties.ctrl=!1}),{once:!0})})),i.addEventListener("mouseup",(function(){e.properties.alt&&e.changeLang()}));break;case"AltLeft":case"AltRight":i.innerHTML=a("keyboard_option_key"),i.dataset.keyName="alt";var s=function(){};r(e,l,b).call(e,s,"AltLeft"),r(e,l,b).call(e,s,"AltRight"),i.addEventListener("click",(function(){r(e,u,m).call(e,i),r(e,y,g).call(e)})),i.addEventListener("mousedown",(function(){i.classList.add("keyboard__key--active"),e.properties.alt=!0,document.addEventListener("mouseup",(function(){i.classList.remove("keyboard__key--active"),e.properties.alt=!1}),{once:!0})})),i.addEventListener("mouseup",(function(){e.properties.ctrl&&e.changeLang()}));break;case"ArrowUp":i.innerHTML=a("keyboard_arrow_up");var k=function(){e.textarea.value="".concat(e.textarea.value.slice(0,e.selectionEnd),"↑").concat(e.textarea.value.slice(e.selectionEnd)),e.selectionEnd+=1,r(e,y,g).call(e)};i.addEventListener("click",(function(){r(e,u,m).call(e,i),k()})),r(e,l,b).call(e,k,"ArrowUp");break;case"ArrowLeft":i.innerHTML=a("keyboard_arrow_left");var h=function(){r(e,u,m).call(e,i),e.selectionEnd>0&&(e.selectionEnd-=1),r(e,y,g).call(e)};i.addEventListener("click",h),r(e,l,b).call(e,h,"ArrowLeft");break;case"ArrowDown":i.innerHTML=a("keyboard_arrow_down");var v=function(){e.textarea.value="".concat(e.textarea.value.slice(0,e.selectionEnd),"↓").concat(e.textarea.value.slice(e.selectionEnd)),e.selectionEnd+=1,r(e,y,g).call(e)};i.addEventListener("click",(function(){r(e,u,m).call(e,i),v()})),r(e,l,b).call(e,v,"ArrowDown");break;case"ArrowRight":i.innerHTML=a("keyboard_arrow_right");var p=function(){r(e,u,m).call(e,i),e.selectionEnd<e.textarea.value.length&&(e.selectionEnd+=1),e.textarea.selectionStart=e.selectionEnd,r(e,y,g).call(e)};i.addEventListener("click",p),r(e,l,b).call(e,p,"ArrowRight");break;case"ShiftLeft":i.textContent="Shift",i.classList.add("keyboard__key--activatable","keyboard__key--fill"),i.addEventListener("click",(function(){r(e,u,m).call(e,i),i.classList.toggle("keyboard__key--shift-active"),e.toggleShift()})),r(e,d,E).call(e,e.toggleShift,"ShiftLeft");break;case"ShiftRight":i.textContent="Shift",i.classList.add("keyboard__key--shift-right","keyboard__key--activatable"),i.addEventListener("click",(function(){r(e,u,m).call(e,i),i.classList.toggle("keyboard__key--shift-active"),e.toggleShift()})),r(e,d,E).call(e,e.toggleShift,"ShiftRight");break;case"Tab":i.innerHTML=a("keyboard_tab");var L=function(){e.textarea.value="".concat(e.textarea.value.slice(0,e.selectionEnd),"  ").concat(e.textarea.value.slice(e.selectionEnd)),e.selectionEnd+=2,r(e,y,g).call(e)};i.addEventListener("click",(function(){r(e,u,m).call(e,i),L()})),r(e,l,b).call(e,L,"Tab");break;case"Delete":i.innerHTML=a("delete");var w=function(){e.textarea.value="".concat(e.textarea.value.slice(0,e.selectionEnd)).concat(e.textarea.value.slice(e.selectionEnd+1)),r(e,y,g).call(e)};i.addEventListener("click",(function(){r(e,u,m).call(e,i),w()})),r(e,l,b).call(e,w,"Delete");break;case"Backspace":i.classList.add("keyboard__key--wide"),i.innerHTML=a("backspace");var x=function(){var t=0===e.selectionEnd?0:e.selectionEnd-1;e.textarea.value="".concat(e.textarea.value.slice(0,t)).concat(e.textarea.value.slice(e.selectionEnd)),e.selectionEnd>0&&(e.selectionEnd-=1),r(e,y,g).call(e)};i.addEventListener("click",(function(){r(e,u,m).call(e,i),x()})),r(e,l,b).call(e,x,"Backspace");break;case"CapsLock":i.classList.add("keyboard__key--wide","keyboard__key--activatable"),i.innerHTML=a("keyboard_capslock");var S=function(){r(e,f,_).call(e),i.classList.toggle("keyboard__key--caps-active",e.properties.capsLock),r(e,y,g).call(e)};i.addEventListener("click",(function(){r(e,u,m).call(e,i),S()})),r(e,l,b).call(e,S,"CapsLock");break;case"Enter":i.classList.add("keyboard__key--wide"),i.innerHTML=a("keyboard_return");var C=function(){e.textarea.value="".concat(e.textarea.value.slice(0,e.selectionEnd),"\n").concat(e.textarea.value.slice(e.selectionEnd)),e.selectionEnd+=1,r(e,y,g).call(e)};i.addEventListener("click",(function(){r(e,u,m).call(e,i),C()})),r(e,l,b).call(e,C,"Enter");break;case"Space":i.classList.add("keyboard__key--extra-wide"),i.innerHTML=a("space_bar");var A=function(){e.textarea.value="".concat(e.textarea.value.slice(0,e.selectionEnd)," ").concat(e.textarea.value.slice(e.selectionEnd)),e.selectionEnd+=1,r(e,y,g).call(e)};i.addEventListener("click",(function(){r(e,u,m).call(e,i),A()})),r(e,l,b).call(e,A,"Space");break;default:i.setAttribute("data-type","textKey");var K=function(){var t=function(e,t,a){return t&&a?e.toLowerCase():!t&&a?e.toUpperCase():e}(n[e.properties.status],e.properties.shift,e.properties.capsLock);e.textarea.value="".concat(e.textarea.value.slice(0,e.selectionEnd)).concat(t).concat(e.textarea.value.slice(e.selectionEnd)),e.selectionEnd+=1,r(e,y,g).call(e)};i.addEventListener("click",(function(){r(e,u,m).call(e,i),K()})),r(e,l,b).call(e,K,n[0])}t.push(i),c&&t.push(document.createElement("br"))})),t}function L(){var e=this;this.elements.keys.forEach((function(t){var a=t.dataset.keycode;"textKey"===t.dataset.type&&(t.innerText=e.keyLayout.find((function(e){return e[0]===a}))[e.properties.status])}))}function b(e,t){document.addEventListener("keydown",(function(a){if(a.code===t){a.preventDefault();var n=document.querySelector('[data-keycode="'.concat(t,'"]'));n.classList.add("keyboard__key--active"),document.addEventListener("keyup",(function(){n.classList.remove("keyboard__key--active")})),e()}}))}function E(e,t){document.addEventListener("keydown",(function(a){if(a.code===t){a.preventDefault();var n=document.querySelector('[data-keycode="'.concat(t,'"]'));n.classList.add("keyboard__key--active"),a.repeat||(e(),document.addEventListener("keyup",(function a(i){i.code===t&&(n.classList.remove("keyboard__key--active"),e(),document.removeEventListener("keyup",a))})))}}))}function m(e){e.classList.add("keyboard__key--active"),setTimeout((function(){e.classList.remove("keyboard__key--active")}),150)}function g(){this.textarea.focus(),this.textarea.selectionEnd=this.selectionEnd}function _(){this.properties.capsLock=!this.properties.capsLock;var t,a=function(t,a){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=e(t))){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw c}}}}(this.elements.keys);try{for(a.s();!(t=a.n()).done;){var n=t.value;"textKey"===n.dataset.type&&(n.textContent=this.properties.capsLock?n.textContent.toUpperCase():n.textContent.toLowerCase())}}catch(e){a.e(e)}finally{a.f()}}function w(){var e=this,t=new Set;document.addEventListener("keydown",(function(a){t.add(a.key),t.has("Control")&&t.has("Alt")&&(e.changeLang(),t.clear())})),document.addEventListener("keyup",(function(e){t.delete(e.key)}))}document.body.innerHTML='\n<div class="textarea-box">\n  <textarea class="use-keyboard-input" placeholder="no war"></textarea>\n</div>\n<ul class="text-list">\n  <li>Клавиатура создана в операционной системе Windows</li>\n  <li>Для переключения языка комбинация: ctrl + alt</li>\n</ul>\n';var x=new h([["Backquote","`","~","ё","Ё"],["Digit1","1","!","1","!"],["Digit2","2","@","2",'"'],["Digit3","3","#","3","№"],["Digit4","4","$","4",";"],["Digit5","5","%","5","%"],["Digit6","6","^","6",":"],["Digit7","7","&","7","?"],["Digit8","8","*","8","*"],["Digit9","9","(","9","("],["Digit0","0",")","0",")"],["Minus","-","_","-","_"],["Equal","=","+","=","+"],["Backspace"],["Tab"],["KeyQ","q","Q","й","Й"],["KeyW","w","W","ц","Ц"],["KeyE","e","E","у","У"],["KeyR","r","R","к","К"],["KeyT","t","T","е","Е"],["KeyY","y","Y","н","Н"],["KeyU","u","U","г","Г"],["KeyI","i","I","ш","Ш"],["KeyO","o","O","щ","Щ"],["KeyP","p","P","з","З"],["BracketLeft","[","{","х","{"],["BracketRight","]","}","ъ","Ъ"],["Backslash","\\","|","\\","/"],["Delete"],["CapsLock"],["KeyA","a","A","ф","Ф"],["KeyS","s","S","ы","Ы"],["KeyD","d","D","в","В"],["KeyF","f","F","а","А"],["KeyG","g","G","п","П"],["KeyH","h","H","р","Р"],["KeyJ","j","J","о","О"],["KeyK","k","K","л","Л"],["KeyL","l","L","д","Д"],["Semicolon",";",":","ж","Ж"],["Quote","'",'"',"э","Э"],["Enter"],["ShiftLeft"],["KeyZ","z","Z","я","Я"],["KeyX","x","X","ч","Ч"],["KeyC","c","C","с","С"],["KeyV","v","V","м","М"],["KeyB","b","B","и","И"],["KeyN","n","N","т","Т"],["KeyM","m","M","ь","Ь"],["Comma",",","<","б","Б"],["Period",".",">","ю","Ю"],["Slash","/","?",".",","],["ArrowUp"],["ShiftRight"],["ControlLeft"],["MetaLeft"],["AltLeft"],["Space"],["AltRight"],["ArrowLeft"],["ArrowDown"],["ArrowRight"],["ControlRight"]]);window.addEventListener("DOMContentLoaded",(function(){x.init()}))})();